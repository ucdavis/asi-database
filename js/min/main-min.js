function hideUnavailableOrganizations(){var e=MyApp.oTable._("tr",{filter:"applied"});MyApp.Organizations=[],$.each(e,function(e,t){var a=t[MyApp.filterIndexes.organizations];-1===$.inArray(a,MyApp.Organizations)&&0!==a.length&&MyApp.Organizations.push(a)})}function addFilters(){var e=$("#organizations");$.each(MyApp.Organizations,function(t,a){e.append('<li><label><input type="checkbox" name="'+a+'"> '+a+"</label></li>")});var t=$("#regions");$.each(MyApp.Regions,function(e,a){t.append('<li><label><input type="checkbox" name="'+a+'"> '+a+"</label></li>")});var a=$("#researcharea");$.each(MyApp.categories,function(e,t){a.append('<li><label><input type="checkbox" name="'+t+'"> '+t+"</label></li>")}),$(".filterrow").on("click","ul.filterlist",function(e){var t="",a=this.id,i=MyApp.filterIndexes[a],n=[];$("input",this).each(function(e,a){a.checked&&(0!==t.length&&(t+="|"),t+=a.name)}),MyApp.oTable.fnFilter(t,i,!0,!1),hideUnavailableOrganizations(),displayCurrentFilters()}),$("#clearfilters").click(function(e){e.preventDefault(),$(":checkbox","ul.filterlist").each(function(){this.checked=!1}),$("ul.filterlist").click()})}function GenerateResearcherColumn(e){var t=e.gsx$title.$t,a=e.gsx$positiontitle.$t,i=e.gsx$categories.$t,n=i,r="<a href='#' class='researcher-popover' data-toggle='popover' data-content='"+i+"' data-original-title='"+t+"'>"+t+"</a><br /><span class='discreet'>"+a+"</span>";return r}function GenerateProjectColumn(e){var t="<span style='font-size: 0.8em;'>"+e.gsx$project1title.$t.trunc(20)+"</span>",a="Status: "+e.gsx$expectedcompletiondate.$t+(e.gsx$linktoprojectwebsite.$t?"—"+e.gsx$linktoprojectwebsite.$t:""),i="<a href='#' class='project-popover' data-toggle='popover' data-content='"+a+"' data-original-title='"+e.gsx$project1title.$t+"'>"+t+"</a>",n="<span style='font-size: 0.8em;'>"+e.gsx$project2title.$t.trunc(20)+"</span>",r="Status: "+e.gsx$expectedcompletiondate_2.$t+(e.gsx$linktoprojectwebsite_2.$t?"—"+e.gsx$linktoprojectwebsite_2.$t:""),s="<a href='#' class='project-popover' data-toggle='popover' data-content='"+r+"' data-original-title='"+e.gsx$project2title.$t+"'>"+n+"</a>",o="<span style='font-size: 0.8em;'>"+e.gsx$project3title.$t.trunc(20)+"</span>",l="Status: "+e.gsx$expectedcompletiondate_3.$t+(e.gsx$linktoprojectwebsite_3.$t?"—"+e.gsx$linktoprojectwebsite_3.$t:""),p="<a href='#' class='project-popover' data-toggle='popover' data-content='"+l+"' data-original-title='"+e.gsx$project3title.$t+"'>"+o+"</a>",c=i+(e.gsx$project2title.$t?s:"")+(e.gsx$project3title.$t?p:""),g=e.gsx$categories.$t;return c}function displayCurrentFilters(){var e=$("#filters"),t="";if($("input:checked","#filterAccordian").each(function(){0!==t.length&&(t+=" + "),t+="<strong>"+this.name+"</strong>"}),0!==t.length){var a=$("<div class='alert alert-info'><strong>Filters</strong><p>You are filtering on "+t+"</p></div>");e.html(a),e[0].scrollIntoView(!0)}else e.html(null)}function createDataTable(){jQuery.extend(jQuery.fn.dataTableExt.oSort,{"link-content-pre":function(e){return $(e).html().trim().toLowerCase()},"link-content-asc":function(e,t){return t>e?-1:e>t?1:0},"link-content-desc":function(e,t){return t>e?1:e>t?-1:0}}),MyApp.oTable=$("#spreadsheet").dataTable({aoColumnDefs:[{bVisible:!1,aTargets:[-2,-3,-1]}],iDisplayLength:20,bLengthChange:!1,aaData:MyApp.spreadsheetData,aoColumns:MyApp.headerData})}MyApp={},MyApp.spreadsheetData=[],MyApp.keywords=[],MyApp.headerData=[{sTitle:"Title"},{sTitle:"Program"},{sTitle:"Year"},{sTitle:"Type"},{sTitle:"region"},{sTitle:"organizations"},{sTitle:"categories"}],MyApp.filterIndexes={organizations:6,regions:5,categories:7},MyApp.Organizations=[],MyApp.Regions=[],MyApp.categories=[],String.prototype.trunc=function(e){return this.substr(0,e-1)+(this.length>e?"&hellip;":"")},$(function(){var e="https://spreadsheets.google.com/feeds/list/1y7A89kMdcA8_uGTky0ec5Qksj4g9cIIpm4veVYrNDb4/1/public/values?alt=json-in-script&callback=?";$.getJSON(e,{},function(e){$.each(e.feed.entry,function(e,t){var a=t.gsx$title.$t,i=t.gsx$departmentprogram.$t+'<br /><span class="discreet">'+t.gsx$organization.$t+"</span>",n=t.gsx$typeoforganization.$t,r="<a target='_blank' href='"+t.gsx$personalwebsitelink.$t+"'><i class='icon-globe'></i></a>",s="<a href='mailto:"+t.gsx$email.$t+"'><i class='icon-envelope'></i></a>",o=s+" "+(t.gsx$personalwebsitelink.$t?r:"")+"<br />"+t.gsx$type.$t,l=t.gsx$region.$t,p=t.gsx$categories.$t;MyApp.spreadsheetData.push([GenerateResearcherColumn(t),i,GenerateProjectColumn(t),o,l,n,p]),-1===$.inArray(n,MyApp.Organizations)&&0!==n.length&&MyApp.Organizations.push(n),-1===$.inArray(l,MyApp.Regions)&&0!==l.length&&MyApp.Regions.push(l),$.each(p.trim().replace(/^[\r\n]+|\.|[\r\n]+$/g,"").split(";"),function(e,t){t=t.trim(),-1===$.inArray(t,MyApp.categories)&&0!==t.length&&MyApp.categories.push(t)}),MyApp.categories.sort()}),MyApp.Organizations.sort(),MyApp.Regions.sort(),createDataTable(),addFilters()})});